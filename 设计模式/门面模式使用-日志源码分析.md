## 1. 为什么要使用slf4j ##
在阿里巴巴Java开发手册中关于日志使用有这样一条：
![](https://raw.githubusercontent.com/zhaoxiaofa/xiaofa-java-learn/master/pictures/log/alibaba.png)

**为什么要使用slf4j，举个例子：**  
我们自己的系统中使用了logback这个日志系统  
我们的系统使用了A.jar，A.jar中使用的日志系统为log4j  
我们的系统又使用了B.jar，B.jar中使用的日志系统为slf4j-simple  
这样，我们的系统就不得不同时支持并维护logback、log4j、slf4j-simple三种日志框架，非常不便。

解决这个问题的方式就是引入一个适配层，由适配层决定使用哪一种日志系统，而调用端只需要做的事情就是打印日志而不需要关心如何打印日志。**slf4j是一个日志标准，并不是日志系统的具体实现。**

slf4j的直接/间接实现有slf4j-simple、logback、slf4j-log4j12。

## 2. 测试使用slf4j ##

写的测试工具类：

    public class LogDemo {
    
	    public static void main(String[] args) {
	        Logger logger = LoggerFactory.getLogger(LogDemo.class);
	        logger.info("hello world");
	    }

	}

### 2.1 如果只引入slf4j的依赖,不会打印出日志。 ###

pom.xml配置如下：  

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.25</version>
    </dependency>

执行之后控制台打印结果：

    SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
	SLF4J: Defaulting to no-operation (NOP) logger implementation
	SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.

**解释：这说明slf4j不提供日志的具体实现，只有slf4j是无法打印日志的。**

### 2.2 配置中引入slf4j,logback ###

pom.xml配置如下：  

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.25</version>
    </dependency>
	<dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.2.3</version>
    </dependency>

执行之后控制台打印结果：

    16:48:40.324 [main] INFO LogDemo - hello world

**解释：这说明引入一个实现类可以正常打印日志。**

### 2.3 配置中引入slf4j,并且引入了三种不同的设置 ###

pom.xml配置如下：

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.25</version>
    </dependency>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.2.3</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.7.25</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.21</version>
    </dependency>

执行之后控制台打印结果：

    SLF4J: Class path contains multiple SLF4J bindings.
	SLF4J: Found binding in [jar:file:/D:/Java/maven/repository/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]
	SLF4J: Found binding in [jar:file:/D:/Java/maven/repository/org/slf4j/slf4j-simple/1.7.25/slf4j-simple-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]
	SLF4J: Found binding in [jar:file:/D:/Java/maven/repository/org/slf4j/slf4j-log4j12/1.7.21/slf4j-log4j12-1.7.21.jar!/org/slf4j/impl/StaticLoggerBinder.class]
	SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
	SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]
	16:51:05.496 [main] INFO LogDemo - hello world

**解释：引入多个实现类可以正常打印日志，但会输出一些告警日志,提示我们同时引入了多个slf4j的实现，然后选择其中的一个作为我们使用的日志系统。**


## 3. 从源码看slf4j实现原理 ##


进入LoggerFactory.getLogger方法：

    public static Logger getLogger(Class<?> clazz) {
        Logger logger = getLogger(clazz.getName());
        if (DETECT_LOGGER_NAME_MISMATCH) {
            Class<?> autoComputedCallingClass = Util.getCallingClass();
            if (autoComputedCallingClass != null && nonMatchingClasses(clazz, autoComputedCallingClass)) {
                Util.report(String.format("Detected logger name mismatch. Given name: \"%s\"; computed name: \"%s\".", logger.getName(),
                                autoComputedCallingClass.getName()));
                Util.report("See " + LOGGER_NAME_MISMATCH_URL + " for an explanation");
            }
        }
        return logger;
    }







## 4. Spring日志加载 ##

- 在debug的时候不要使用spring的web项目，最开始偷懒，在自己的公司项目中加了行日志，想打断点进入，可死活进入不到 bind 方法体内，原因是spring初始化的时候已经加载了很多框架中的日志。

    Logger logger = LoggerFactory.getLogger(Object.class);

    


    

## 5. 其他注意事项 ##


- 创建的项目不要是springboot项目，springboot项目在parent的依赖里面已经默认引入了slf4j和logback，不需要自己手动在pom文件中添加依赖；  